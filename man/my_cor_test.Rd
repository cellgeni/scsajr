% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/scsajr.R
\name{my_cor_test}
\alias{my_cor_test}
\title{Compute pairwise correlation statistics between matrix columns}
\usage{
my_cor_test(x, y = NULL, ...)
}
\arguments{
\item{x}{A numeric matrix with columns representing variables.}

\item{y}{Optional numeric matrix; if omitted, \code{y <- x}. If provided, \code{ncol(y)} may differ from \code{ncol(x)}.}

\item{...}{Additional arguments passed to \code{stats::cor.test()} (e.g., \code{method}, \code{use}).}
}
\value{
A list with three matrices (dimensions = \code{ncol(x)} × \code{ncol(y)}):
\itemize{
\item \code{e}: Pearson correlation coefficients between each pair of columns,
\item \code{n}: sample sizes used in each correlation (number of non-NA pairs),
\item \code{p}: p-values from \code{cor.test} for each pair.
Row names = \code{colnames(x)}, column names = \code{colnames(y)}.
}
}
\description{
Given two numeric matrices \code{x} and \code{y} (or a single matrix \code{x}),
this function computes Pearson correlation coefficients, sample sizes, and p-values for each pair of columns.
}
\details{
\enumerate{
\item If \code{y} is missing, set \code{y <- x}.
\item Initialize matrices \code{e}, \code{n}, and \code{p} with \code{NA} of size \code{ncol(x)} × \code{ncol(y)}.
\item For each column index \code{i} in \code{x} and \code{j} in \code{y}:
\itemize{
\item Extract \code{x_i <- x[, i]} and \code{y_j <- y[, j]}.
\item Compute \code{valid <- !is.na(x_i) & !is.na(y_j)}; let \code{n[i, j] <- sum(valid)}.
\item If \code{n[i, j] > 2}, run

\if{html}{\out{<div class="sourceCode r">}}\preformatted{ct <- cor.test(x_i[valid], y_j[valid], ...)
}\if{html}{\out{</div>}}

and set \code{e[i, j] <- ct$estimate}, \code{p[i, j] <- ct$p.value}.
\item Otherwise, leave \code{e[i, j]} and \code{p[i, j]} as \code{NA}.
}
\item Return \code{list(e = e, n = n, p = p)}.
}
}
\examples{
\dontrun{
mat1 <- matrix(rnorm(100), ncol = 5)
mat2 <- matrix(rnorm(100), ncol = 4)
res <- my_cor_test(mat1, mat2)
dim(res$e) # 5 × 4
head(res$p)
}

}
\seealso{
\code{\link[stats]{cor.test}}
}
